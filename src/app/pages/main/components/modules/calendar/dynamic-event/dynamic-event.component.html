<div class="--dynamic-dialog p-4">
  <app-dialog-header
    [title]="dialogType === ACTION_DIALOG.CREATE ? 'Create New Event' : 'Event Details'"
    [eventData]="eventData"
    [ACTION_DIALOG]="ACTION_DIALOG"
    [currentMode]="currentMode"
    (closeDialog)="closeDialog()"
  ></app-dialog-header>

  <p-divider />

  <div class="--dynamic-title">
    @if (dialogType === ACTION_DIALOG.CREATE) {
      <h4>Event name</h4>
    } @else {
      <h3 class="mb-4">{{ eventData.title }}</h3>
    }

    <div class="row mt-4">
      <div class="col-6">
        @for (box of left_box; track $index) {
          <app-form-field
            [icon]="box.icon"
            [label]="box.label"
            [type]="box.type"
            [width]="box.width"
            [field]="box.field"
            [value]="eventData[box.field]"
            [placeholder]="box.placeholder"
            [options]="box.list"
            [currentMode]="currentMode"
            [dialogType]="dialogType"
            [ACTION_DIALOG]="ACTION_DIALOG"
          ></app-form-field>
        }
      </div>
      <div class="col-6">
        @for (box of right_box; track $index) {
          <app-form-field
            [icon]="box.icon"
            [label]="box.label"
            [type]="box.type"
            [field]="box.field"
            [value]="eventData[box.field]"
            [placeholder]="box.placeholder"
            [options]="box.list"
            [currentMode]="currentMode"
            [dialogType]="dialogType"
            [ACTION_DIALOG]="ACTION_DIALOG"
          ></app-form-field>
        }
      </div>

      <div class="d-flex align-items-center">
        <img
          [src]="'assets/images/' + currentMode + '/user-group.svg'"
          alt="user_icon"
          class="me-2"
        />
        <p class="--text-box">Participants</p>
        @if (dialogType === ACTION_DIALOG.CREATE) {
          <div class="--chip-container" (click)="focusInput()">
            <div class="w-100 d-flex align-items-start flex-wrap gap-2">
              @for (tag of tags; track $index) {
                <div class="--chip d-flex align-items-center">
                  <img
                    src="assets/images/common/close-ssm.svg"
                    class="me-1"
                    (click)="removeTag($index)"
                    alt="close_icon"
                  />
                  <span>
                    {{ tag }}
                  </span>
                </div>
              }
              <input
                #chipInput
                [(ngModel)]="inputValue"
                (keydown.enter)="addTag($event)"
                [placeholder]="tags.length === 0 ? 'Enter names or groups, separated by comma' : ''"
              />
            </div>
          </div>
        } @else {
          @for (chip of eventData.participants; track $index) {
            <p-chip [label]="chip" class="me-2" />
          }
        }

        <!-- <app-form-participant-selector
          [participants]="eventData.participants"
          [isEditing]="dialogType !== ACTION_DIALOG.CREATE"
          [currentMode]="currentMode"
        ></app-form-participant-selector> -->
      </div>
    </div>
  </div>

  <p-divider />

  <div class="--dynamic-content mt-3">
    <h5 class="mb-2">Event description</h5>

    @if (dialogType === ACTION_DIALOG.CREATE) {
      <textarea
        pTextarea
        pSize="large"
        placeholder="Enter description"
        variant="filled"
        rows="3"
        class="w-100"
      ></textarea>
    } @else {
      <div class="--detail-content">
        <p class="w-100">{{ eventData.description }}</p>
      </div>
    }

    @if (dialogType === ACTION_DIALOG.DETAIL) {
      <h5 class="mt-3">RSVP Approved</h5>

      <p class="w-100">{{ eventData.rsvp_list }}</p>

      <app-form-attachment [attachments]="eventData.attachments"></app-form-attachment>
    }
  </div>

  <div class="--dynamic-action mt-3 d-flex justify-content-between align-items-center">
    <p>Event ID: 3567890</p>

    <div class="d-flex align-items-center">
      <div class="--attachment me-3 d-flex justify-content-center align-items-center">
        <img src="assets/images/common/attachment.svg" alt="attachment_icon" />
      </div>

      <div class="--save-draft mx-3 d-flex algin-items-center">
        <img src="assets/images/common/save-draft.svg" class="me-2" alt="save_draft_icon" />
        <p>Save Draft</p>
      </div>

      <button-primary
        icon="assets/images/common/white-file-plus.svg"
        label="Create Event"
        [isPrimaryActive]="true"
      ></button-primary>
    </div>
  </div>
</div>
