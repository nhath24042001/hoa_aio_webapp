<div class="--dynamic-dialog p-4">
  @if (dialogType === ACTION_DIALOG.CREATE) {
    <div class="mb-4 d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <img
          [src]="'assets/images/' + currentMode + '/calendar-plus.svg'"
          class="me-3"
          alt="calendar_icon"
        />
        <h3 class="mb-0">Create New Event</h3>
      </div>

      <div class="--right" (click)="closeDialog()">
        <div class="--image-wrapper">
          <img [src]="'assets/images/' + currentMode + '/close.svg'" alt="close_icon" />
        </div>
      </div>
    </div>
  } @else {
    <div class="--box-title mb-1 d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <img src="assets/images/common/calendar-date.svg" class="me-2" alt="clipboard_icon" />
        <h3 class="mb-0">Event Details</h3>
      </div>

      <div class="--right">
        <div>
          <p class="text-end">Created: {{ eventData.start_date | date }}</p>
          <p class="text-end">Updated: {{ eventData.end_date | date }}</p>
        </div>

        <div class="--share-box mx-3 d-flex justify-content-center align-items-center">Share</div>

        <div class="--image-wrapper d-flex align-items-center">
          <img src="assets/images/common/edit-sm.svg" class="me-3" alt="edit_icon" />
          <img
            [src]="'assets/images/' + currentMode + '/close.svg'"
            class="--close"
            alt="close_icon"
            (click)="closeDialog()"
          />
        </div>
      </div>
    </div>
  }

  <p-divider />

  <div class="--dynamic-title">
    @if (dialogType === ACTION_DIALOG.CREATE) {
      <h4>Event name</h4>
    } @else {
      <h3 class="mb-4">{{ eventData.title }}</h3>
    }

    <div class="row mt-4">
      <div class="col-6">
        @for (box of left_box; track $index) {
          <div class="mb-3 d-flex align-items-center">
            <img
              [src]="'assets/images/' + currentMode + '/' + box.icon + '.svg'"
              [alt]="box.icon + '_icon'"
              class="me-2"
            />

            @if (dialogType === ACTION_DIALOG.CREATE) {
              <p [style.width]="box.width" class="--text-box">{{ box.label }}</p>
            } @else {
              <p class="--text-box --detail me-3">{{ box.label }}</p>
            }

            @if (dialogType === ACTION_DIALOG.CREATE) {
              @if (box.type === 'select') {
                <p-select
                  [options]="box.list"
                  variant="filled"
                  optionLabel="name"
                  [placeholder]="box.placeholder"
                  styleClass="flex-fill"
                />
              } @else if (box.type === 'input') {
                <input
                  type="text"
                  variant="filled"
                  pInputText
                  [placeholder]="box.placeholder"
                  class="flex-fill"
                />
              } @else {
                <p-datepicker
                  [placeholder]="box.placeholder"
                  showIcon
                  iconDisplay="input"
                  class="flex-fill"
                  variant="filled"
                />
              }
            } @else {
              @if (box.field === 'start_date') {
                <span>{{ eventData[box.field] | date: 'MMM. dd, hh:mm a' }}</span>
              } @else {
                <span>{{ eventData[box.field] }}</span>
              }
            }
          </div>
        }
      </div>
      <div class="col-6">
        @for (box of right_box; track $index) {
          <div class="mb-3 d-flex align-items-center">
            <img
              [src]="'assets/images/' + currentMode + '/' + box.icon + '.svg'"
              [alt]="box.icon + '_icon'"
              class="me-2"
            />

            <p class="--text-box --detail me-3">{{ box.label }}</p>

            @if (dialogType === ACTION_DIALOG.CREATE) {
              @if (box.type === 'select') {
                <p-select
                  [options]="box.list"
                  variant="filled"
                  optionLabel="name"
                  [placeholder]="box.placeholder"
                  styleClass="flex-fill"
                />
              } @else if (box.type === 'input') {
                <input
                  type="text"
                  variant="filled"
                  pInputText
                  [placeholder]="box.placeholder"
                  class="flex-fill"
                />
              } @else {
                <p-datepicker
                  [placeholder]="box.placeholder"
                  showIcon
                  iconDisplay="input"
                  class="flex-fill"
                  variant="filled"
                />
              }
            } @else {
              @if (box.field === 'start_date') {
                <span>{{ eventData[box.field] | date: 'MMM. dd, hh:mm a' }}</span>
              } @else {
                <span>{{ eventData[box.field] }}</span>
              }
            }
          </div>
        }
      </div>

      <div class="d-flex align-items-center">
        <img
          [src]="'assets/images/' + currentMode + '/user-group.svg'"
          alt="user_icon"
          class="me-2"
        />
        <p class="--text-box">Participants</p>

        @if (dialogType === ACTION_DIALOG.CREATE) {
          <div class="--chip-container" (click)="focusInput()">
            <div class="w-100 d-flex align-items-start flex-wrap gap-2">
              @for (tag of tags; track $index) {
                <div class="--chip d-flex align-items-center">
                  <img
                    src="assets/images/common/close-ssm.svg"
                    class="me-1"
                    (click)="removeTag($index)"
                    alt="close_icon"
                  />
                  <span>
                    {{ tag }}
                  </span>
                </div>
              }
              <input
                #chipInput
                [(ngModel)]="inputValue"
                class=""
                (keydown.enter)="addTag($event)"
                [placeholder]="tags.length === 0 ? 'Enter names or groups, separated by comma' : ''"
              />
            </div>
          </div>
        } @else {
          @for (chip of eventData.participants; track $index) {
            <p-chip [label]="chip" class="me-2" />
          }
        }
      </div>
    </div>

    <p-divider />

    <div class="--dynamic-content mt-3">
      <h5 class="mb-2">Event description</h5>

      @if (dialogType === ACTION_DIALOG.CREATE) {
        <textarea
          pTextarea
          pSize="large"
          placeholder="Enter description"
          variant="filled"
          rows="3"
          class="w-100"
        ></textarea>
      } @else {
        <div class="--detail-content">
          <p class="w-100">{{ eventData.description }}</p>
        </div>
      }

      @if (dialogType === ACTION_DIALOG.DETAIL) {
        <h5 class="mt-3">RSVP Approved</h5>

        <p class="w-100">{{ eventData.rsvp_list }}</p>

        <h4 class="mt-3">Attachments</h4>

        <div class="d-flex algin-items-center">
          @for (attach of eventData.attachments; track $index) {
            <div class="--attachment-box me-4 d-flex align-items-center justify-content-center">
              <img
                src="assets/images/common/placeholder-img.svg"
                class="me-2"
                alt="placeholder_icon"
              />

              <div class="--file-info d-flex flex-column">
                <span class="--file-name">{{ attach.file_name }}</span>
                <span class="--file-size">{{ attach.file_size }}</span>
              </div>
            </div>
          }
        </div>
      }
    </div>

    <div class="--dynamic-action mt-3 d-flex justify-content-between align-items-center">
      <p>Event ID: 3567890</p>

      <div class="d-flex align-items-center">
        <div class="--attachment me-3 d-flex justify-content-center align-items-center">
          <img src="assets/images/common/attachment.svg" alt="attachment_icon" />
        </div>

        <div class="--save-draft mx-3 d-flex algin-items-center">
          <img src="assets/images/common/save-draft.svg" class="me-2" alt="save_draft_icon" />
          <p>Save Draft</p>
        </div>

        <button-primary
          icon="assets/images/common/white-file-plus.svg"
          label="Create Event"
          [isPrimaryActive]="true"
        ></button-primary>
      </div>
    </div>
  </div>
</div>
